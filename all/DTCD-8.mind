{"root":{"data":{"id":"cy3ei9ru51c0","created":1704115440307,"text":"DTCD"},"children":[{"data":{"id":"coeg7fo2ygg0","created":1668675808477,"text":"重点记录","layout":null,"expandState":"expand"},"children":[{"data":{"id":"chdqxgb3fo00","created":1643011389399,"text":"DOP","layout_mind_offset":{"x":257,"y":101},"layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxmvmf8x5c0","created":1663311952876,"text":"nDataColCount","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxmw5vyeco0","created":1663311995246,"text":"一屏扫描时间 * FFT频率","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"coukcgy7akw0","created":1670312446833,"text":"DFS","expandState":"expand"},"children":[{"data":{"id":"coukcjv9jxk0","created":1670312453186,"text":"1列频谱(8ms) == m_nDoFftDataLen * m_nDataBlockSize个数据","expandState":"expand"},"children":[{"data":{"id":"cow3fvay1i80","created":1670467874216,"text":"m_nDoFftDataLen: blockcount","expandState":"expand"},"children":[]},{"data":{"id":"cow5sd63npk0","created":1670474495695,"text":"m_nDataBlockSize 132 == 4个dop窗数据 + 128阶M波深度","expandState":"expand"},"children":[]}]},{"data":{"id":"crb2ogw2ypk0","created":1679301443240,"text":"g_iTimeCount（8ms） = 1000/MAX_DO_FFT_FREQ（FFT频率125）：1列 = 8ms","expandState":"expand"},"children":[]},{"data":{"id":"covd3in2qk80","created":1670393557424,"text":"总列数 == 采样总时间6s * 采样频谱（6250）","expandState":"expand"},"children":[]},{"data":{"id":"cow3f0e7tz40","created":1670467806933,"text":"总数据量 = 总列数 * m_nDataBlockSize","expandState":"expand"},"children":[]},{"data":{"id":"ct139r62beo0","created":1685599828572,"text":"dfs文件构成：4dop + 32M波+32M波","expandState":"expand"},"children":[]}]},{"data":{"id":"cow5qpuy5080","created":1670474366591,"text":"数据转换流程","expandState":"expand"},"children":[{"data":{"id":"cow5quioa940","created":1670474376732,"text":"采集","expandState":"expand"},"children":[{"data":{"id":"cow5rt8uvxc0","created":1670474452326,"text":"FPGA M波92阶 =》 转换为128阶M波","expandState":"expand"},"children":[]}]},{"data":{"id":"cow5wuu2cy80","created":1670474847606,"text":"m_dataItem.m_pDataPtr1、m_dataItem.m_pDataPtr2高通滤波之前的采集数据","expandState":"expand"},"children":[]},{"data":{"id":"cow5x7a6xn40","created":1670474874702,"text":"m_dataItem.m_pDataPtr3、m_dataItem.m_pDataPtr4可用于提取M波原始数据、DOP数据","expandState":"expand"},"children":[]}]},{"data":{"id":"cucp9nymyjs0","created":1690435203974,"text":"TCD_CHN_MAX 256 = 128阶M波 * 2通道","expandState":"expand"},"children":[]}]},{"data":{"id":"cuy4dh5era00","created":1692610578342,"text":"硬件上数","expandState":"collapse"},"children":[{"data":{"id":"cuy4oh0kfyo0","created":1692611440055,"text":"CMainWnd::OnCreate()","expandState":"expand"},"children":[{"data":{"id":"cuy4n6r3zrs0","created":1692611339351,"text":"CDTCDApp::CheckParam()","expandState":"expand"},"children":[{"data":{"id":"cuy4navdmy80","created":1692611348316,"text":"UDataProcess::InitUSBThread()","expandState":"expand"},"children":[]},{"data":{"id":"cuy4dpq85k80","created":1692610597014,"text":"InitUSBAndGetADBits()：初始化USB数据并读取AD位数","expandState":"expand"},"children":[{"data":{"id":"cuy4eot98rc0","created":1692610673385,"text":"UDataProcess::RunInitUSBAndGetADBits()","expandState":"expand"},"children":[{"data":{"id":"cuy4fy2cfb40","created":1692610771890,"text":"UHwInterface::UnFreeze()","expandState":"expand"},"children":[{"data":{"id":"cuy4fzdt4680","created":1692610774760,"text":"UHwInterface::UpdateHw()"},"children":[{"data":{"id":"cuy4g56gfcg0","created":1692610787376,"text":"UHwInterface::Dtcd8100WriteToHw()：界面参数写入硬件"},"children":[]}]}]}]}]}]}]}]},{"data":{"id":"covd4slr9wg0","created":1670393657476,"text":"主界面设置","expandState":"collapse"},"children":[{"data":{"id":"cppzu20bqao0","created":1673504500170,"text":"菜单栏","expandState":"expand"},"children":[{"data":{"id":"covd4wlormo0","created":1670393666179,"text":"void CMainWnd::OnMenuBarCmd()主函数","expandState":"expand"},"children":[{"data":{"id":"csgsm36gkew0","created":1683538563745,"text":"医院信息CUserInfoSetupPage","expandState":"expand"},"children":[{"data":{"id":"csgsmu476y80","created":1683538622382,"text":"医院名称修改","expandState":"expand"},"children":[{"data":{"id":"csgsm6ba6zk0","created":1683538570567,"text":"点击确定CUserInfoSetupPage::WindowProc():WM_GENERAL_APPLY","expandState":"expand"},"children":[{"data":{"id":"csgsm8fvo1c0","created":1683538575199,"text":"弹出密码输入框CPwdInputDlg"},"children":[{"data":{"id":"csgso4qszvk0","created":1683538723880,"text":"与【新名称、序列号等编码】后生成的唯一密码对比"},"children":[]}]}]}]},{"data":{"id":"csgsnr2xr0o0","created":1683538694139,"text":"软件关闭时，再从全局变量读取加密后写入xml","expandState":"expand"},"children":[{"data":{"id":"csgsp610vwo0","created":1683538805039,"text":"BOOL USystemData::SaveUUserData()"},"children":[]}]}]},{"data":{"id":"cshdndn8ngg0","created":1683597908200,"text":"报告设置CReportSetupSheet","expandState":"expand"},"children":[{"data":{"id":"cshdqmvlsdc0","created":1683598163389,"text":"报告类型设置CPrintSetupPage::WindowProc()","expandState":"expand"},"children":[]},{"data":{"id":"csk3xc4cgao0","created":1683875157293,"text":"报告快照参数显示CReportDopindexshowPage","expandState":"expand"},"children":[]}]}]},{"data":{"id":"covd5dxxd0g0","created":1670393703924,"text":"void CMainWnd::OnMenuBarUpdateUI()按钮状态更新","expandState":"expand"},"children":[]}]},{"data":{"id":"cppzu4wflqw0","created":1673504506465,"text":"工具栏","expandState":"expand"},"children":[{"data":{"id":"cppzu94gqvc0","created":1673504515658,"text":"void CMainWnd::OnToolCmd(UINT nID)","expandState":"expand"},"children":[{"data":{"id":"cppzufttmxs0","created":1673504530252,"text":"快照（直接提取数据打开快照编辑界面）","expandState":"expand"},"children":[{"data":{"id":"cppzuir90pc0","created":1673504536626,"text":"void CMainWnd::OnSnapshot()","expandState":"expand"},"children":[]}]},{"data":{"id":"cppzv11p5lk0","created":1673504576440,"text":"快照保存","expandState":"expand"},"children":[{"data":{"id":"cppzv319eb40","created":1673504580767,"text":"void CMainWnd::OnDopSnapshotSave()","expandState":"expand"},"children":[]}]}]}]}]},{"data":{"id":"cow7zh58he00","created":1670480695119,"text":"采集","expandState":"expand"},"children":[{"data":{"id":"co7jqii4yhs0","created":1667974847200,"text":"初始化","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cth58o9mqtc0","created":1687230345420,"text":"UDataRecvThread::DoWork()","expandState":"expand"},"children":[{"data":{"id":"coukb0qgw1s0","created":1670312333173,"text":"从硬件上数据DDataRecv::ReadData()","expandState":"expand"},"children":[]},{"data":{"id":"cth5afmu0bs0","created":1687230483355,"text":"硬件上传的数据包解析UDataRecvThread::Dtcd8100ParserData()","expandState":"expand"},"children":[{"data":{"id":"cth5e5xsteg0","created":1687230775707,"text":"发送消息，进行数据处理UDataProcess::DataProcDTCD8100()","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cow7zlqc0h40","created":1670480705101,"text":"采集void UDataProcess::DataProcDTCD8100()","expandState":"expand"},"children":[{"data":{"id":"cucomwyg4pk0","created":1690433421178,"text":"m_dataItem.m_pDataPtr1、m_dataItem.m_pDataPtr2高通滤波之前的硬件采集原始数据\nm_dataItem.m_pDataPtr3、m_dataItem.m_pDataPtr4高通滤波之后的IQ路数据\nm_dataItem.m_nDataBlockCount数据块大小、单次USB上传总点数\nm_dataItem.m_nDataSubChCount阶数（92）=》换算到128阶","expandState":"expand"},"children":[]},{"data":{"id":"cucngx257xk0","created":1690430130107,"text":"合法性","expandState":"expand"},"children":[]},{"data":{"id":"cow7zssmbag0","created":1670480720477,"text":"高通滤波","expandState":"expand"},"children":[]},{"data":{"id":"cucohdj2z6w0","created":1690432987069,"text":"复制采集数据 至 原始数据缓冲","expandState":"expand"},"children":[]},{"data":{"id":"cucnc2ot6i80","created":1690429750540,"text":"计算FFT数据、颜色数据","expandState":"expand"},"children":[]},{"data":{"id":"cth5qc8095s0","created":1687231729755,"text":"包络计算UDataProcess::ProcDopEnv()","expandState":"expand"},"children":[]},{"data":{"id":"cth5m39rzmw0","created":1687231396815,"text":"计算指数ProcDopIndex()","expandState":"expand"},"children":[]},{"data":{"id":"couk9efnzjc0","created":1670312206266,"text":"保存数据BOOL UDataProcess::DoSaveData()","expandState":"expand"},"children":[]},{"data":{"id":"cth5h17mdnk0","created":1687231000510,"text":"发送消息，显示频谱CMainWnd::HandleSubscribeMessage()","expandState":"expand"},"children":[{"data":{"id":"co7jq95w3eo0","created":1667974826869,"text":"走谱void CFftWnd::DrawSpectrum()","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"cu7j9hrwou80","created":1689910464064,"text":"绘制","expandState":"expand"},"children":[{"data":{"id":"cu7j9mwqteo0","created":1689910475240,"text":"dop","expandState":"expand"},"children":[{"data":{"id":"cu7j9of91tc0","created":1689910478536,"text":"延迟4列绘制","expandState":"expand"},"children":[]},{"data":{"id":"cu7oipwmezc0","created":1689925292590,"text":"解冻","expandState":"expand"},"children":[{"data":{"id":"cu7oiuuyc8w0","created":1689925303373,"text":"分支主题","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cu6r9n4w3sw0","created":1689831484655,"text":"多深度CMultiGatingWnd","expandState":"expand"},"children":[{"data":{"id":"cu7oizbxjow0","created":1689925313107,"text":"解冻","expandState":"expand"},"children":[{"data":{"id":"cu7oj0lzem80","created":1689925315891,"text":" CMultiGatingWnd::RedrawWholeGraph()","expandState":"expand"},"children":[]}]}]}]}]},{"data":{"id":"cn6ycur51dk0","created":1664258375020,"text":"DTCD包络、指数、参数","expandState":"collapse","layout":null},"children":[{"data":{"id":"cnkhlqdj5yw0","created":1665632951292,"text":"m_UProcess.m_pDopEnv","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cnkhmnan85s0","created":1665633022951,"text":"Dop Env Data","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"cnip6n7svuw0","created":1665451217919,"text":"模拟输出temp_vp","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cnipdje6lpc0","created":1665451758146,"text":"fEnv","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cnipef5k4uo0","created":1665451827282,"text":"fEnvValue[i][k]*scale_unit","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cnipemsupdc0","created":1665451843928,"text":"fEnvValue","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cnipes7nwxs0","created":1665451855708,"text":"scale_unit","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cnipeugzlbs0","created":1665451860625,"text":"scale / 256.0f","expandState":"expand","layout":null},"children":[{"data":{"id":"cnipf80frsg0","created":1665451890099,"text":"scale 能够测量速度的容积范围","expandState":"expand","layout":null},"children":[{"data":{"id":"cnipfb9v58g0","created":1665451897199,"text":"探头类型ID：pBlood->m_nProbeID","layout":null},"children":[]},{"data":{"id":"cnipg0m3qao0","created":1665451952359,"text":"pBlood->m_nSampleFreqIndex","layout":null},"children":[]},{"data":{"id":"cnipg2dg74g0","created":1665451956189,"text":"GetSampleFreqByIndex()","expandState":"expand","layout":null},"children":[{"data":{"id":"cnir7681j6o0","created":1665456901512,"text":"nSampleFreq = 4350 采样频率？采样4350个点再做ADC合并？","layout":null},"children":[]}]},{"data":{"id":"cnixg1s4yfc0","created":1665474523780,"text":"探头角度fAngleScale","layout":null},"children":[]}]}]}]}]}]}]},{"data":{"id":"ct4k12s9nps0","created":1685951787320,"text":"指数更新","expandState":"collapse"},"children":[{"data":{"id":"cstcewvzy5s0","created":1684813143181,"text":"冻结后重新计算指数CFftWnd::ReCalcIndex()","expandState":"expand"},"children":[]},{"data":{"id":"cn6yd0m0xmo0","created":1664258387771,"text":"指数计算BOOL UDataProcess::ProcDopIndex ()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cn6yde3gge00","created":1664258417123,"text":"UDataProcess::CheckEnV()包络是否有效，\n包络持续500MS认为是有效的，\n包络断开持续200MS认为是无效的","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cn6yf5ao2vc0","created":1664258554696,"text":"bool m_bValidStatus[4][2];\t\t// 包络是否有效  4dop*2(上下包络)","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cn6yg2uijds0","created":1664258627730,"text":"int  m_nStatusTimes[4][2];\t\t// 包络持续或断开的个数","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cn6ykd53r1c0","created":1664258963595,"text":"包络有效时，m_nStatusTimes累计；包络无效时清0","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cnkjzmj0gh40","created":1665639682234,"text":"包络值","expandState":"expand","layout":null},"children":[{"data":{"id":"cn6ymctkbqo0","created":1664259119626,"text":"有值时","layout":null,"expandState":"collapse"},"children":[{"data":{"id":"cnkhpwvywf40","created":1665633278924,"text":"包络无效，m_nStatusTimes累计","expandState":"expand","layout":null},"children":[{"data":{"id":"cnkhqgfmbtc0","created":1665633321471,"text":"当累计到MAX_DO_FFT_FREQ/2时，包络状态变为有效，累计数清0，所有指数置为0","layout":null},"children":[]}]},{"data":{"id":"cnkhpz889n40","created":1665633284019,"text":"包络有效，m_nStatusTime累计清0","layout":null},"children":[]}]},{"data":{"id":"cnkhsuo9tow0","created":1665633509198,"text":"无值时","expandState":"collapse","layout":null},"children":[{"data":{"id":"cnkhpwvywf40","created":1665633278924,"text":"包络有效，m_nStatusTimes累计","expandState":"expand","layout":null},"children":[{"data":{"id":"cnkhqgfmbtc0","created":1665633321471,"text":"当累计到MAX_DO_FFT_FREQ/5时，包络状态变为无效，累计数清0，所有指数置为0","layout":null},"children":[]}]},{"data":{"id":"cnkhpz889n40","created":1665633284019,"text":"包络无效，m_nStatusTime累计清0","layout":null},"children":[]}]}]},{"data":{"id":"cnkjxfrzp9c0","created":1665639510811,"text":"m_nIndexEnvLen[i]%25 每读取25列","expandState":"expand","layout":null},"children":[{"data":{"id":"cnkk01gtcxk0","created":1665639714753,"text":"包络累计和平均值 < 10，包络状态设为无效","expandState":"expand","layout":null},"children":[]}]},{"data":{"id":"cnkks8yx8ps0","created":1665641925282,"text":"m_nIndexEnvLen[0] < nMaxEnvLen 每500重置指数为0","expandState":"expand","layout":null},"children":[]}]},{"data":{"id":"cnqjs6wfanc0","created":1666248459408,"text":"int CTCD_Dsp::detect_pole(short *pData, int cnt, short& peak, short& dias, short& hr)   \npData包络数据，cnt数据长度4*125","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqjves846w0","created":1666248711660,"text":"pole_buf存储有效的包络数据","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqjvkthbeo0","created":1666248724797,"text":"复制包络数据","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqjvqqw4eo0","created":1666248737701,"text":"少于连续10个包络点，删除，置为0","expandState":"expand","layout":null},"children":[]}]},{"data":{"id":"cnqjvjw4cjk0","created":1666248722780,"text":"valid_cnt计算pole_buf中有效包络点个数 >1","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqjz4kaitc0","created":1666249002870,"text":"bool CTCD_Dsp::calc_hr_line()","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqjzwi4fj40","created":1666249063688,"text":"mean","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqk0weyn000","created":1666249141861,"text":"pole_buf中> 1的平均值","layout":null},"children":[]}]},{"data":{"id":"cnqk06uf6ew0","created":1666249086200,"text":"up_mean","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqk1sxpxrs0","created":1666249212653,"text":"pole_buf中> mean的值的平均值","layout":null},"children":[]}]},{"data":{"id":"cnqk0aeqq940","created":1666249093959,"text":"down_mean","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqk25bbq5c0","created":1666249239597,"text":"pole_buf中<mean && > 1的值的平均值","layout":null},"children":[]}]}]},{"data":{"id":"cnqk3vpq4600","created":1666249375428,"text":"pole_buf中无效包络数据，取左右均值（left+right）/2 填充","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqk9qjcqmo0","created":1666249834344,"text":"极点计算：波峰为负值、波谷为正值","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqm0hogdts0","created":1666254752004,"text":"包络波趋势计算","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqk9ffiz4g0","created":1666249810168,"text":"diff(pole_buf, cnt)计算值为负，则包络上升，计算值为正，则包络下降","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqk9j52iko0","created":1666249818243,"text":"pData[i] = pData[i] - pData[i+1]; ","layout":null},"children":[]}]},{"data":{"id":"cnqk9xasojc0","created":1666249849064,"text":"sign(pole_buf, cnt-1)","layout":null},"children":[]}]},{"data":{"id":"cnqkb3bmh940","created":1666249940539,"text":"diff(pole_buf, cnt-1)计算后pole_buf仅极点有值（负：极大值，正：极小值）","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqkgy8zcf40","created":1666250399680,"text":"dif两次后极点与原数据位置差1，还原位置","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqkcjxq3e00","created":1666250055068,"text":"pole_buf[i+1] = pole_buf[i];","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqkcqm50hs0","created":1666250069605,"text":"pole_buf[0] = 0","layout":null},"children":[]}]}]},{"data":{"id":"cnqkgpv88140","created":1666250381434,"text":"过滤均值+方差范围内的波峰、波谷","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqld05rxo80","created":1666252911493,"text":"保证波谷比down_mean小，波峰比up_mean大","expandState":"expand","layout":null},"children":[]}]},{"data":{"id":"cnqkil4r70o0","created":1666250527855,"text":"merge_pole(pData, pole_buf, pole_cnt)合并极点，使之出现连续的 峰-谷-峰-谷……","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqkipx0wls0","created":1666250538271,"text":"当pole_buf不为0时","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqkjrbmov40","created":1666250619695,"text":"get_next_pole_pos()","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqklcoius00","created":1666250744551,"text":"获取下一个不为0的pole_buf","layout":null},"children":[]}]},{"data":{"id":"cnqm3ugpm740","created":1666255014926,"text":"合并相邻波峰（波谷），波峰、谷相邻则保留","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqm44nn0qw0","created":1666255037113,"text":"峰-平-峰-平-谷-谷-峰 合并为 峰-谷-峰","layout":null},"children":[]}]}]},{"data":{"id":"cnqkqbostwg0","created":1666251134212,"text":"计算peak，dias，hr","expandState":"expand","layout":null},"children":[{"data":{"id":"cnqm5drgpgg0","created":1666255135299,"text":"peak波峰的均值","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqm5hvxt9s0","created":1666255144277,"text":"hr两波峰之间的距离累加","expandState":"expand","layout":null},"children":[]},{"data":{"id":"cnqm5tkw3740","created":1666255169730,"text":"dias波谷的均值","expandState":"expand","layout":null},"children":[]}]}]}]},{"data":{"id":"cstft04z5ow0","created":1684822710682,"text":"测量点添加指数重新计算","expandState":"expand"},"children":[{"data":{"id":"cp6flslp8m80","created":1671517791406,"text":"计算指数BOOL CFftWnd::UpdateManualDopIndex()","expandState":"expand"},"children":[{"data":{"id":"cstfv2l63o00","created":1684822872743,"text":"更新指数结构体CFftWnd::UpdateDopParamValue()","expandState":"expand"},"children":[{"data":{"id":"cstfs2bsqlc0","created":1684822637084,"text":"更新指数控件显示CAdjustControl::OnPaint()"},"children":[]}]}]}]}]},{"data":{"id":"cowy034onr40","created":1670554091832,"text":"参数更新","expandState":"expand"},"children":[{"data":{"id":"cox0bgcov140","created":1670560624840,"text":"构建指数控件void CFftWnd::BuildScanParmCtrls()","expandState":"expand"},"children":[{"data":{"id":"cox0bxvy2740","created":1670560663010,"text":"设置单位m_sValueUnit","expandState":"expand"},"children":[]}]},{"data":{"id":"cowwu0iko9s0","created":1670550794847,"text":"void CFftWnd::UpdateScanParmWin()主界面参数更新","expandState":"expand"},"children":[{"data":{"id":"cowwv9t0mvk0","created":1670550893433,"text":"BOOL UDopplerCmd::GetParamValueByStep()","expandState":"expand"},"children":[]}]},{"data":{"id":"cowy4e5cu9k0","created":1670554429274,"text":"主界面参数调整","expandState":"expand"},"children":[{"data":{"id":"cowy492g9z40","created":1670554418214,"text":"LRESULT CMainWnd::OnDopParamChange()","expandState":"expand"},"children":[{"data":{"id":"ct747ajzr080","created":1686211816531,"text":"SP_SCALE","expandState":"expand"},"children":[{"data":{"id":"ct7484iz4jk0","created":1686211881773,"text":"根据探头ID获取真实GATE：UDopplerCmd::GetSampleGateByIndex()","expandState":"expand"},"children":[]},{"data":{"id":"ct74bovgg8g0","created":1686212161156,"text":"根据GATE\\探头ID\\scaleID，获取深度范围UDopplerCmd::GetValidMaxDepth()","expandState":"expand"},"children":[{"data":{"id":"ct74dlisq5s0","created":1686212310588,"text":"计算脉冲频率UDopplerCmd::GetSampleFreqByIndex()"},"children":[]}]}]},{"data":{"id":"cyf43ael6e80","created":1705304774601,"text":"CFftWnd::UpdateDopParamValue()"},"children":[]}]}]},{"data":{"id":"cowy0u248c00","created":1670554150450,"text":"快照编辑打开","expandState":"expand"},"children":[{"data":{"id":"cowy0gctvug0","created":1670554120623,"text":"m_pSnapshotLoadDlg->UpdateParamIdx()","expandState":"expand"},"children":[]}]},{"data":{"id":"cowy1hkjct40","created":1670554201630,"text":"加载病档","expandState":"expand"},"children":[{"data":{"id":"cowy1m0tfrk0","created":1670554211321,"text":"m_pFftView[0]->SetReviewMode(TRUE)","expandState":"expand"},"children":[]},{"data":{"id":"cowy6co4efc0","created":1670554582783,"text":"场景还原：加载参数void CMainWnd::LoadBloodParam()","expandState":"expand"},"children":[]}]}]},{"data":{"id":"ch8p9jz5ins0","created":1642498895751,"text":"LI血管痉挛指数","layout_mind_offset":{"x":-8,"y":-109},"layout":null,"expandState":"expand"},"children":[{"data":{"id":"ch8pfcnyrxc0","created":1642499350022,"text":"LI = MEAN(MCA) \\ MEAN(ICA)","layout":null,"expandState":"expand"},"children":[{"data":{"id":"chdqu19lct40","created":1643011121564,"text":"左侧LI = Vm(LMCA) \\ Vm(LICA)\n右侧LI = Vm(RMCA) \\ Vm(RICA)","expandState":"expand","layout":null},"children":[{"data":{"id":"ch8pin6futs0","created":1642499607999,"text":"Vm(LMCA): 当前所有LMCA血管中vm的最大值","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"ch8pg9u09i80","created":1642499422221,"text":"在病档、报告界面中根据Vm计算得到","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"ch8ph5v3vbc0","created":1642499491944,"text":"对于左侧血管，需要同时有LMCA及LICA-EC的血流数据，才可计算LI。右侧同理。","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"codhtsl06ig0","created":1668578821754,"text":"场景","expandState":"collapse","layout":null},"children":[{"data":{"id":"codhty7tfmo0","created":1668578834017,"text":"从xml中读取场景配置BOOL USystemData::ReadMiscData()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coe7zub5qig0","created":1668652644555,"text":"将当前选择的场景配置送到全局变量中","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"coe8by9preo0","created":1668653593545,"text":"场景设置页面：BOOL CScenesApplySetup::OnInitDialog()","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"coe85qsdk0w0","created":1668653107074,"text":"当前场景以【事件】存入对应场景文件","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coe87gkil000","created":1668653241559,"text":"记录void CMainWnd::OnRecord()","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"coe87mjubbc0","created":1668653254579,"text":"保存快照CString CMainWnd::SaveDopSnap()","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"coe88fvtyhk0","created":1668653318431,"text":"保存临时检查BOOL  CMainWnd::SaveTempExam()","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"coe89gd6ps80","created":1668653397844,"text":"场景切换，并更新各全局变量的值","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coe89oeynq00","created":1668653415366,"text":"void CMainWnd::OnExamSceneChange()","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"coe8a1nkozc0","created":1668653444185,"text":"回放转采集，还原场景void CMainWnd::OnAcquire()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coe8ac52nkg0","created":1668653467011,"text":"分支主题","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"cp6fcpumc8g0","created":1671517080138,"text":"测量点、标签","expandState":"collapse"},"children":[{"data":{"id":"cp6fcu4jq1s0","created":1671517089445,"text":"添加","expandState":"expand"},"children":[{"data":{"id":"cp6fd01vtl40","created":1671517102345,"text":"void CFftWnd::AddPointCaliber()","expandState":"expand"},"children":[{"data":{"id":"cp6fep26q9k0","created":1671517235147,"text":"计算测量点图标区域大小","expandState":"expand"},"children":[]}]},{"data":{"id":"cp6flnctb2o0","created":1671517779985,"text":"LRESULT CFftWnd::OnPointCaliberAnchor()","expandState":"expand"},"children":[]}]},{"data":{"id":"cp6jnsqp79s0","created":1671529232877,"text":"移除","expandState":"expand"},"children":[{"data":{"id":"cp6jnya8p7k0","created":1671529244942,"text":"LRESULT CFftWnd::OnPointCaliberRemove()","expandState":"expand"},"children":[]}]}]},{"data":{"id":"co8hn3jk9ig0","created":1668070497279,"text":"趋势图CDlg_trend","layout":null,"expandState":"collapse"},"children":[{"data":{"id":"ct8qerta9p40","created":1686376027022,"text":"解冻采集CMainWnd::OnStart()","expandState":"expand"},"children":[{"data":{"id":"ct8qf1xn7hs0","created":1686376049053,"text":"重置趋势图CDlg_trend::reset()","expandState":"expand"},"children":[]},{"data":{"id":"ct8qqf5a3tk0","created":1686376939819,"text":"采集数据处理UDataProcess::DataProc()","expandState":"expand"},"children":[{"data":{"id":"co9bo8126zs0","created":1668155218706,"text":"BOOL UDataProcess::DoSaveData()采集数据写入TCD文件","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"ct8qqgyttjs0","created":1686376943782,"text":"CMainWnd::HandleSubscribeMessage()","expandState":"expand"},"children":[{"data":{"id":"ct8qqu6ygs80","created":1686376972572,"text":"CDlg_trend::UpdateSpectrum()频谱更新","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"ctdz5hnf8v40","created":1686908489394,"text":"点击记录","expandState":"expand"},"children":[{"data":{"id":"ct8qf1xn7hs0","created":1686376049053,"text":"重置趋势图CDlg_trend::reset()","expandState":"expand"},"children":[]}]},{"data":{"id":"ctc09pj8dyo0","created":1686708521209,"text":"切换量程CDlg_trend::OnLButtonDown()","expandState":"expand"},"children":[{"data":{"id":"csua3etzxqw0","created":1684908159609,"text":"CDlg_trend::set_curve_span()","expandState":"expand"},"children":[{"data":{"id":"csuamr5c87s0","created":1684909675335,"text":"内存申请mIndexBuf","expandState":"expand"},"children":[{"data":{"id":"csyj9guvh9k0","created":1685340264016,"text":"span.time * span.unit * span.freq = 4* 3600 *125 = 8*225000","expandState":"expand"},"children":[]},{"data":{"id":"csyja5igmew0","created":1685340317685,"text":"IndexBufSetSize()","expandState":"expand"},"children":[{"data":{"id":"csyja7vmsls0","created":1685340322835,"text":"CCircle_buf<TYPE>::set_size()"},"children":[]}]}]},{"data":{"id":"csuanze1ed40","created":1684909771640,"text":"CStatic_curve::set_data_len()","expandState":"expand"},"children":[{"data":{"id":"csuao2z5yps0","created":1684909779447,"text":"根据时间长度计算相对趋势图宽度的scale","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"csuaznn3nmo0","created":1684910686436,"text":"走谱CDlg_trend::UpdateSpectrum()","expandState":"expand"},"children":[{"data":{"id":"csub8vietqo0","created":1684911408844,"text":"CDlg_trend::add_data()","expandState":"expand"},"children":[{"data":{"id":"ct8qwboorsg0","created":1686377402470,"text":"计算指数值","expandState":"expand"},"children":[]},{"data":{"id":"ct8qw4p36n40","created":1686377387257,"text":"添加数据到buf","expandState":"expand"},"children":[{"data":{"id":"ct8qwks3axs0","created":1686377422267,"text":"若buf满了，buf移动处理CDlg_trend::IndexBufShiftLeft()","expandState":"expand"},"children":[{"data":{"id":"ct8rb7ik9vc0","created":1686378568855,"text":"重绘曲线redraw()"},"children":[]}]}]},{"data":{"id":"co8hnaz42m00","created":1668070513457,"text":"趋势曲线CStatic_curve曲线添加数据","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"ct8rbktlstc0","created":1686378597821,"text":"绘制","expandState":"expand"},"children":[{"data":{"id":"ct8rbpqfmhk0","created":1686378608513,"text":"CDlg_trend::refresh_curve()优化后：每像素绘制","expandState":"expand"},"children":[{"data":{"id":"ct8rcny90600","created":1686378682996,"text":"绘制选段"},"children":[]},{"data":{"id":"ct8rcrarj8g0","created":1686378690283,"text":"绘制曲线"},"children":[]},{"data":{"id":"ct8rd2adwqo0","created":1686378714205,"text":"绘制事件CDlg_trend::draw_event()"},"children":[]}]}]}]},{"data":{"id":"csuazt4d9mo0","created":1684910698364,"text":"向buf添加数据CDlg_trend::IndexBufAddData()","expandState":"expand"},"children":[]},{"data":{"id":"csvwpyjizds0","created":1685073550898,"text":"buf数据满后数据左移CDlg_trend::IndexBufShiftLeft()","expandState":"expand"},"children":[]}]},{"data":{"id":"csuaqjwofvk0","created":1684909973031,"text":"过度换气开启灰框均值计算tagCurve_segment","expandState":"expand"},"children":[]},{"data":{"id":"ct8qhsd2t7c0","created":1686376263311,"text":"回放","expandState":"expand"},"children":[{"data":{"id":"co8ik8bpfxc0","created":1668073093705,"text":"选择区域左键计算","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co8ikfuj0340","created":1668073110081,"text":"void CStatic_curve::OnLButtonUp()","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"ct8qsy264pc0","created":1686377137718,"text":"模拟输入","expandState":"expand"},"children":[{"data":{"id":"co94u8k5tfk0","created":1668135942276,"text":"OnRecord记录uTcdInfo.m_Trend1Info[nCount]","expandState":"expand","layout":null},"children":[{"data":{"id":"co94vplhkjs0","created":1668136057726,"text":"监护GetUMonitorParamList()","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"co94vs2a8aw0","created":1668136063095,"text":"模拟输入m_uAnaInputList","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co94x4ppl280","created":1668136168997,"text":"特例Ana_CO2","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co94xa2ibdc0","created":1668136180655,"text":"uTcdInfo.m_Trend1Info[nCount] = uTcdInfo.m_Trend1Info[nCount - 1];","layout":null},"children":[]},{"data":{"id":"co94yoh2iyw0","created":1668136290374,"text":"uTcdInfo.m_Trend1Info[nCount + 1] = uTcdInfo.m_Trend1Info[nCount - 1];","layout":null},"children":[]}]}]}]},{"data":{"id":"ct8qt79c8eg0","created":1686377157742,"text":"采集数据处理UDataProcess::DataProc()","expandState":"expand"},"children":[{"data":{"id":"co9cqhw85fk0","created":1668158218019,"text":"UDataProcess::ProcAnaInput ()","expandState":"expand","layout":null},"children":[{"data":{"id":"co9crefug940","created":1668158288863,"text":"m_UProcess.m_Co2Data.m_fETCo2放入m_UProcess.m_pAnaData","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"co9bo8126zs0","created":1668155218706,"text":"BOOL UDataProcess::DoSaveData()采集数据写入TCD文件","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cobppa7ls1c0","created":1668397917271,"text":"m_UProcess.m_pAnaData中取数据","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"co99igpqmhk0","created":1668149125207,"text":"ReadTrendUAnaInputParamList()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co99j5pa9k80","created":1668149179599,"text":"void UGlobalData::InitTrend() =》m_uMonitorAcq.m_uAnaInputList","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"co99iew8fa80","created":1668149121246,"text":"ReadTrendUMonitorParamList()","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"co98ldlrcao0","created":1668146532419,"text":"bool CDlg_trend::set_data() 设置指数数据","expandState":"expand","layout":null},"children":[{"data":{"id":"co98mahffpc0","created":1668146603991,"text":"回放时仍然按每秒125列绘制","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cobnqbqel3k0","created":1668392356729,"text":"时间 =》Mmode Index","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cobnpg1qt7s0","created":1668392287758,"text":"int UTcdUnionFile::ReadTCDOneData2()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cobnpmx13eo0","created":1668392302710,"text":"要读取的数据列在当前缓冲中","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cobnqullb4w0","created":1668392397797,"text":"要读取的数据列不在当前缓冲中","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cobnr1p80zs0","created":1668392413254,"text":"根据当前要读取的数据列获取所在文件.tcd：int  UTcdUnionFile::GetTcdFileIndexByBlockIndex()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cobo3ht7neg0","created":1668393388694,"text":"根据每个文件的起始数据列判断pFileIndex->m_nDataBlockStart \\ pFileIndex->m_nDataBlockCount","layout":null},"children":[]}]},{"data":{"id":"coboenfhne80","created":1668394262930,"text":"m_nFileTCDIndex记录当前找到的文件索引","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cobobejzrtk0","created":1668394008519,"text":"根据获取的文件名打开对应文件","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cobod1pf39c0","created":1668394137277,"text":"创建.map文件：TCD-0001.tcd.map104838162.map作为该文件映射","layout":null},"children":[]}]},{"data":{"id":"cobofjmjhkg0","created":1668394333014,"text":"读取数据信息m_uTcdDataInfo","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cobom7v4f2w0","created":1668394855960,"text":"最大120秒缓冲：MAX_DO_FFT_FREQ*120*nBlockSize","layout":null},"children":[]}]},{"data":{"id":"coboiy80zfs0","created":1668394599880,"text":"构建Trend1/Trend2读取缓冲","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coboq9z6tio0","created":1668395174016,"text":"从 nDataIndex - pFileIndex->m_nDataBlockStart 开始读取缓冲","layout":null},"children":[]}]}]}]}]},{"data":{"id":"cts5cbcnm8w0","created":1688347790285,"text":"脑氧CDlg_NIRStrend","expandState":"expand"},"children":[]},{"data":{"id":"cts5cr4e4iw0","created":1688347824613,"text":"血压CDlg_NIBPtrend","expandState":"expand"},"children":[]},{"data":{"id":"cts5db444nk0","created":1688347868132,"text":"CDlg_BHItrend","expandState":"expand"},"children":[]}]},{"data":{"id":"ctpvthyc57k0","created":1688117805835,"text":"发泡实验","expandState":"collapse"},"children":[{"data":{"id":"ctpvtmuqj200","created":1688117816501,"text":"CDlg_trend::OnTimer()","expandState":"expand"},"children":[{"data":{"id":"cts5r6q2yls0","created":1688348955675,"text":"1000：判断当前趋势图是否开启，并设置发泡定时器","expandState":"expand"},"children":[]},{"data":{"id":"cts5rsb4n740","created":1688349002660,"text":"Timer_BubbleTimer_Auto：发泡时钟计算","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cshdybr1di00","created":1683598766082,"text":"病档CArchiveManageDlg","expandState":"collapse"},"children":[{"data":{"id":"csmrbfif5f40","created":1684144267214,"text":"报告","expandState":"expand"},"children":[{"data":{"id":"csmrblhlohk0","created":1684144280225,"text":"XML报告","expandState":"expand"},"children":[{"data":{"id":"cso7g1u8wu00","created":1684291326990,"text":"报告数据填充CArchiveManageDlg::UpdateReportEditData(): g_bShowFastReport == 0","expandState":"expand"},"children":[]},{"data":{"id":"csmrcjvz93k0","created":1684144355105,"text":"报告数据加载CArchiveManageDlg::OnReportSetupLoad()","expandState":"expand"},"children":[{"data":{"id":"csnm39adi000","created":1684231081161,"text":"读取模板XML：CReportEditor::xml_ReadGridDocPara()","expandState":"expand"},"children":[]}]},{"data":{"id":"csmrbmp86280","created":1684144282863,"text":"模板更新CArchiveManageDlg::OnTemplateUpdate()，加载STI等","expandState":"expand"},"children":[{"data":{"id":"csheoqg0mxk0","created":1683600835535,"text":"CReportEditor::LoadMyXMLReport","expandState":"expand"},"children":[]}]},{"data":{"id":"csms6bti6740","created":1684146688466,"text":"CDiagramEditor::ShowPopup()报告表格右键选择显示指数","expandState":"expand"},"children":[{"data":{"id":"csnk6viwav40","created":1684225722438,"text":"CDiagramEditor::OnCommand()右键菜单响应","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cso5b0svl5s0","created":1684285290690,"text":"word报告","expandState":"expand"},"children":[{"data":{"id":"csnmihc26fk0","created":1684232274139,"text":"报告数据填充CArchiveManageDlg::UpdateReportEditData(): g_bShowFastReport == 2","expandState":"expand"},"children":[{"data":{"id":"cso59prlpco0","created":1684285188304,"text":"将report_ds.xml重组，填充数据CArchiveManageDlg::OpenReportExcute()","expandState":"expand"},"children":[{"data":{"id":"cso5lf9lgu00","created":1684286105817,"text":"指数计算\\偏差计算CArchiveManageDlg::CalcDopIndexDeviation()"},"children":[]}]},{"data":{"id":"cso5a8yuptc0","created":1684285230101,"text":"填充word：CArchiveManageDlg::ShowWordReport()","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cso7kl7chsg0","created":1684291682598,"text":"fastreport报告","expandState":"expand"},"children":[{"data":{"id":"cso7g1u8wu00","created":1684291326990,"text":"CArchiveManageDlg::UpdateReportEditData(): g_bShowFastReport == 1","expandState":"expand"},"children":[{"data":{"id":"cso7l1yml000","created":1684291719076,"text":"执行DelicaReport.exe","expandState":"expand"},"children":[]},{"data":{"id":"cso7la2bgg80","created":1684291736713,"text":"分支主题","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cshdye5hxo00","created":1683598771310,"text":"报告页CReportSetupDlg","expandState":"expand"},"children":[]},{"data":{"id":"cshe4xunp0o0","created":1683599284375,"text":"报告编辑CReportEditView","expandState":"expand"},"children":[{"data":{"id":"cshe6fuhxgo0","created":1683599401911,"text":"CDiagramEditor","expandState":"expand"},"children":[{"data":{"id":"cshebfwjh740","created":1683599793856,"text":"CDocBuffer::DrawLabel()","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"csmre1hxu880","created":1684144471803,"text":"快照数据加载\\指数栏数据加载","expandState":"expand"},"children":[{"data":{"id":"csmreg47h340","created":1684144503624,"text":"CArchiveManageDlg::OnLoadSnapshot()","expandState":"expand"},"children":[{"data":{"id":"csmrerytld40","created":1684144529420,"text":"CArchiveManageDlg::SetReportData()报告指数等数据计算","expandState":"expand"},"children":[]}]},{"data":{"id":"csnk11naavs0","created":1684225265579,"text":"指数表头CArchiveManageDlg::InitImgListHeader()","expandState":"expand"},"children":[]},{"data":{"id":"csnlh2u36c00","created":1684229343104,"text":"指数数据获取CArchiveManageDlg::show_snap_info()","expandState":"expand"},"children":[]}]},{"data":{"id":"ctyz18e75wo0","created":1689040914879,"text":"选择患者CPatientsDlg::OnClickPatientList()","expandState":"expand"},"children":[{"data":{"id":"ctyz4t75xow0","created":1689041195259,"text":"获取快照列表CPatientsDlg::GetCurSnapshotList()","expandState":"expand"},"children":[]},{"data":{"id":"ctyz1h3f5vc0","created":1689040933818,"text":"加载快照CArchiveManageDlg::OnLoadSnapshot()","expandState":"expand"},"children":[{"data":{"id":"ctz00qpby800","created":1689043697480,"text":"快照翻页CPictureListView::OnBtnArrowClicked()","expandState":"expand"},"children":[]},{"data":{"id":"ctz01z75pjc0","created":1689043794336,"text":"快照绘制CPictureListView::DrawFromPicFile()","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cy94abaf28g0","created":1704695965335,"text":"二维码报告CArchiveManageDlg::OnBnClickedBtnAchiveQrcode()"},"children":[]}]},{"data":{"id":"co94rlcfxmg0","created":1668135735015,"text":"快照","expandState":"collapse","layout":null},"children":[{"data":{"id":"co6oqikzp0o0","created":1667887392966,"text":"快照保存","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co6oqqk6op40","created":1667887410331,"text":"CString CMainWnd::SaveDopSnap()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co6oquffob40","created":1667887418751,"text":"int  UTcdSnapFile::CreateFile()截取窗口，构建CDC","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co6orf1ws0w0","created":1667887463646,"text":"BOOL CDIB::CaptureDIB()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co6osdqxhh40","created":1667887539169,"text":"BOOL CDIB::CreateDIB()创建位图","layout":null},"children":[]},{"data":{"id":"co6oshu3vh40","created":1667887548068,"text":"pCopyDc->BitBlt()捕捉窗口数据","layout":null},"children":[]}]}]}]}]},{"data":{"id":"co3cwgh696o0","created":1667549325377,"text":"快照编辑打开","layout_mind_offset":{"x":-38,"y":-5},"expandState":"expand","layout":null},"children":[{"data":{"id":"cy0lvutv4jc0","created":1703831572775,"text":"CPictureListView::OnLButtonDblClk()快照列表双击打开"},"children":[]},{"data":{"id":"co3cxhln4gg0","created":1667549406188,"text":"CSnapshotLoadDlg::LoadNewSnapshot()读取重绘参数","expandState":"expand","layout":null},"children":[{"data":{"id":"co3cznhglgw0","created":1667549575725,"text":"bool   CFftWnd::SetEnvData()设置包络数据","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"co3cwvt1wm80","created":1667549358747,"text":"CSnapshotLoadDlg::OnTimer(UINT_PTR nIDEvent)","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co3d01bx7q00","created":1667549605865,"text":"读取数据列-》重绘","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"co3cz2kh7lk0","created":1667549530195,"text":"重绘DOP","expandState":"expand","layout":null},"children":[{"data":{"id":"co3cym8v3540","created":1667549494664,"text":"void CFftWnd::OnPaint()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cy0lulmhni80","created":1703831474374,"text":"void CFftWnd::BuildDibDataFromRgbArray()","expandState":"expand"},"children":[{"data":{"id":"co3cys2u9940","created":1667549507360,"text":"void CFftWnd::RedrawWholeGraph(CDC* pDc)","layout":null,"expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"co3cz7i6pz40","created":1667549540940,"text":"重绘M波","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"co3czad8ehk0","created":1667549547171,"text":"重绘多深度","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cy3f57u4kug0","created":1704117238467,"text":"保存CSnapshotLoadDlg::OnBtnSave()"},"children":[{"data":{"id":"cy3f61gjojk0","created":1704117302950,"text":"CSnapshotLoadDlg::SaveSnapshotData()"},"children":[]}]}]},{"data":{"id":"co8a0jav2w80","created":1668048981436,"text":"快照反色","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co8a0t3bltk0","created":1668049002748,"text":"BOOL UDataProcessCmd::DrawDopPrintSpectrumEconomic()","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"cy0hxnjew2o0","created":1703820429195,"text":"导入快照"},"children":[{"data":{"id":"cy0hxpxrh4g0","created":1703820434416,"text":"bool CMainWnd::SaveInPutPic()"},"children":[]}]}]},{"data":{"id":"co5pvdlr23s0","created":1667789035102,"text":"回放","layout":null,"expandState":"collapse"},"children":[{"data":{"id":"co5ues50dvk0","created":1667801840100,"text":"记录保存场景文件CMainWnd::OnRecord()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co5uf44qwgg0","created":1667801866205,"text":".dfs数据","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"co5uf5sxctc0","created":1667801869844,"text":".tcd","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"co5ugkxl7aw0","created":1667801981142,"text":".evt场景文件","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co6k5xrr3u80","created":1667874495939,"text":"uEvt.SetUSceneInfo(uScene)加载场景到事件结构体m_info中","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"co6k5z3qbog0","created":1667874498840,"text":"保存文件evtCmd.SaveSceneInfoToFile(uEvt,sSceneFile);","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"co5ufj4p8pk0","created":1667801898854,"text":"EventList事件RECON","layout":null,"expandState":"expand"},"children":[{"data":{"id":"co5uhqr5j0g0","created":1667802072178,"text":"UEventListCmd::AcqAddSystemEvent","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"co5un7hqb3s0","created":1667802500434,"text":"存入typedef struct UEventItem","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"co5pvz4qkpc0","created":1667789081962,"text":"加载检查void CMainWnd::OnTimer(UINT nIDEvent)  ：nIDEvent == TID_LOAD_EXAM","expandState":"expand","layout":null},"children":[{"data":{"id":"co5pwbntes00","created":1667789109237,"text":"加载检查BOOL CMainWnd::LoadExam()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coe7d7zcxjk0","created":1668650871941,"text":"读取场景应用配置信息void CMainWnd::onScene()：SCENE_UNILATERAL","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cowy6co4efc0","created":1670554582783,"text":"加载参数void CMainWnd::LoadBloodParam()","expandState":"expand"},"children":[]}]},{"data":{"id":"coe7fjccijk0","created":1668651053399,"text":"重绘void CFftWnd::RedrawWholeGraph()","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"coe7hafswyg0","created":1668651190745,"text":"频谱文件读取与重绘BOOL UReadFileThread::DoWork ()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coe7hl1b0yg0","created":1668651213813,"text":"频谱更新一列void CFftView::UpdateSpectrum()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"coe7ipba0540","created":1668651301487,"text":"void CFftWnd::DrawSpectrum()","layout":null},"children":[]}]}]}]}]},{"data":{"id":"co6k4rewcnc0","created":1667874403737,"text":"int CMainWnd::OnCreate(LPCREATESTRUCT lpCreateStruct)","expandState":"expand","layout":null},"children":[{"data":{"id":"co6k4bd0m1k0","created":1667874368795,"text":"加载场景USystemData::SetUScenesApplyList()","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"cqd1drvrttk0","created":1675844745523,"text":"回放恢复","expandState":"expand"},"children":[{"data":{"id":"cqd1dxh05mw0","created":1675844757691,"text":"DEventListCmd::RestoreSystemEvent()","expandState":"expand"},"children":[{"data":{"id":"cqd1etkkyds0","created":1675844827564,"text":"加载","expandState":"expand"},"children":[{"data":{"id":"cqd1gf1uxq80","created":1675844952686,"text":"每页加载时都获取<当前页开始时间的最后一个事件GetSysEventItemByPassTime()","expandState":"expand"},"children":[]}]},{"data":{"id":"cqd1hkf97lc0","created":1675845042744,"text":"播放","expandState":"expand"},"children":[{"data":{"id":"cqd1hnazj540","created":1675845049016,"text":"当前页读取超过200ms后，每读取一列都调用DEventListCmd::RestoreSystemEvent()","expandState":"expand"},"children":[]},{"data":{"id":"cqd1meyqvts0","created":1675845422683,"text":"DEventListCmd::RestoreSystemEvent() 中当当前读取列距离事件列<200ms，则恢复回放参数事件","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"cqu2rs8d9i80","created":1677575183757,"text":"M波原始数据","expandState":"expand"},"children":[{"data":{"id":"cqu2rvmvskg0","created":1677575191165,"text":"还原DoBufferMmode()","expandState":"expand"},"children":[]},{"data":{"id":"cqu2s5wnlo00","created":1677575213523,"text":"声音导出","expandState":"expand"},"children":[{"data":{"id":"cqu2sdakfxc0","created":1677575229602,"text":"每个通道128阶M波原始数据 =》每4阶存一个数据到文件","expandState":"expand"},"children":[]}]}]},{"data":{"id":"ct7rl2a7eg00","created":1686277781151,"text":"回放栏CReviewBar","expandState":"expand"},"children":[{"data":{"id":"ct7rlcu39nk0","created":1686277804121,"text":"工具栏CReviewControlBar","expandState":"expand"},"children":[{"data":{"id":"cm20xqbwec80","created":1660101695035,"text":"播放void CReviewControlBar::OnPlay()","layout":null,"expandState":"collapse"},"children":[{"data":{"id":"cm214u4a2mg0","created":1660102251830,"text":"判断起始位置离结束位置时间是否少于一帧的时间","expandState":"expand","layout":null},"children":[{"data":{"id":"cm211f8t79k0","created":1660101984360,"text":"获取记录总时长m_pDataReview->GetReviewTotalPassTime()","layout":null},"children":[]},{"data":{"id":"cm211zpjlcw0","created":1660102028907,"text":"获取一屏扫描时间dopCmd.GetCurSweepMiscsecTime()","layout":null},"children":[]},{"data":{"id":"cm215ib1wy80","created":1660102304483,"text":"获取当前起始位置fPassTime：m_pDataReview->GetCurPageStartTime(tStart, fPassTime)","layout":null},"children":[]}]},{"data":{"id":"cm21dut8k7k0","created":1660102958617,"text":"获取当前屏第一个系统事件：evtCmd.GetNewEvtIndex( fPassTime )","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cm21edus5wg0","created":1660103000069,"text":"播放：m_pDataReview->PlayContinuously();","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cm21f01zaqg0","created":1660103048394,"text":"判断当前是否存在数据文件：sysCmd.IsExistExamTempData()","layout":null},"children":[]},{"data":{"id":"cm21jg082740","created":1660103396573,"text":"判断当前状态是否是停止Review_stop：m_pReadFileThread->GetReviewType()","layout":null},"children":[]},{"data":{"id":"cm21kcocmns0","created":1660103467688,"text":"向线程m_pReadFileThread中设置一屏时间：m_pReadFileThread->SetReadPageTime","layout":null},"children":[]},{"data":{"id":"cm21l7hbdo00","created":1660103534743,"text":"设置状态为Review_play：m_pReadFileThread->SetReviewType","layout":null},"children":[]},{"data":{"id":"cm21njoslf40","created":1660103718045,"text":"判断线程是否是挂起状态，若是则重置开启线程m_pReadFileThread->ResumeThread();","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cm21q9bgfag0","created":1660103930563,"text":"BOOL UReadFileThread::DoWork ()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cm24mhdg5sg0","created":1660112097971,"text":"全局变量","expandState":"expand","layout":null},"children":[{"data":{"id":"cm24lbxzy3s0","created":1660112007789,"text":"当前页读了多少时间m_fTimeCount","layout":null},"children":[]},{"data":{"id":"cm24m2vo3zs0","created":1660112066421,"text":"当前页开始时间m_nStartPassTime","layout":null},"children":[]},{"data":{"id":"cm24n0j07l40","created":1660112139666,"text":"当前应读取的位置：m_nStartPassTime + (int)m_fTimeCount","layout":null},"children":[]}]},{"data":{"id":"cm23vdnluo80","created":1660109974046,"text":"判断累计读取时间是否超过读取页时间（当前页是否读完）","layout":null},"children":[]},{"data":{"id":"cm27ck1yqs80","created":1660119783495,"text":"更新起始页时间m_nStartPassTime，转换为标准时间m_tCurPageStartTime","layout":null},"children":[]},{"data":{"id":"cm27jolubrs0","created":1660120341953,"text":"根据m_nStartPassTime获取两个通道当前开始数据列位置nDfsIndex、m_nStartBlockIndex","layout":null},"children":[]},{"data":{"id":"cm27lztknxc0","created":1660120523094,"text":"通知位置定位更新：msgCmd.NotifyReviewCurTime((UINT)m_nStartPassTime);","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cm27r7kqqag0","created":1660120931795,"text":"CMainWnd::OnUpdateUI()","layout":null},"children":[{"data":{"id":"cm27rsgz4600","created":1660120977280,"text":"更新硬件参数、频谱UHwInterface::UpdateHw()","layout":null},"children":[]}]},{"data":{"id":"cm28l7fo1ps0","created":1660123282413,"text":"更新趋势图","layout":null},"children":[]},{"data":{"id":"cm28lbwpa5k0","created":1660123292150,"text":"更新事件列表","layout":null},"children":[]},{"data":{"id":"cm28lgl3dg00","created":1660123302332,"text":"更新回放条","layout":null},"children":[]},{"data":{"id":"cm28lt3n73k0","created":1660123329575,"text":"更新栓子界面","layout":null},"children":[]}]},{"data":{"id":"cm26jkn0lns0","created":1660117512207,"text":"全局量","layout":null},"children":[{"data":{"id":"cm26jqpwq680","created":1660117525443,"text":"g_iTimeCount（8ms） = 1000/MAX_DO_FFT_FREQ（FFT频率125）：1列 = 8ms","layout":null},"children":[]}]},{"data":{"id":"csvtcdwyhd40","created":1685064023933,"text":"读取当前页数据：非挂起状态","expandState":"expand"},"children":[{"data":{"id":"cm23y7npndc0","created":1660110196084,"text":"读取一列数据：1列 = 8ms = 2个通道50个DeltaSizeLen  每个4block ","expandState":"expand","layout":null},"children":[{"data":{"id":"cm27ae3g4kw0","created":1660119613796,"text":"BOOL UReadFileThread::ReadOneColumnData(BOOL bReadData)","expandState":"expand","layout":null},"children":[{"data":{"id":"cm24okksis80","created":1660112261674,"text":"当前读取的时间位置：UINT(m_nStartPassTime + (int)m_fTimeCount)","layout":null},"children":[]},{"data":{"id":"cm24o51xprs0","created":1660112227882,"text":"当前读取的数据列位置nModelIndex：BOOL UEventListCmd::GetMmodeIndexByPassTime()","expandState":"expand","layout":null},"children":[{"data":{"id":"cm24qxvg6680","created":1660112447345,"text":"RecOnOffList事件列表中存在时间 > 当前应读取的时间","layout":null},"children":[]}]},{"data":{"id":"cm24wxi7z680","created":1660112916730,"text":"设置当前时间pProcStruct->m_fCurPassTime","layout":null},"children":[]},{"data":{"id":"cm24x8lqnr40","created":1660112940887,"text":"读取DFS数据","expandState":"expand","layout":null},"children":[{"data":{"id":"cm24zgp6ua80","created":1660113115238,"text":"两个通道分别读取","layout":null,"expandState":"expand"},"children":[{"data":{"id":"covcyv9y6yw0","created":1670393193107,"text":"1列频谱（8ms）: DeltaSizeLen * nDataSize","priority":1},"children":[]},{"data":{"id":"cm24zqpf8bk0","created":1660113137020,"text":"nDataSize（4/4+128）：DataBlockSize  一个DeltaSizeLen中数据块个数","layout":null},"children":[{"data":{"id":"cow5oynpwbc0","created":1670474229016,"text":"4个dop窗 + 32个M波深度","priority":1},"children":[]}]},{"data":{"id":"cm250dn4z5s0","created":1660113186948,"text":"DeltaSizeLen（50）：BlockCount、FftDeltaLen ","layout":null},"children":[]},{"data":{"id":"csvu95cz9fs0","created":1685066591329,"text":"每个通道读取DeltaSizeLen（50）次数据","expandState":"expand"},"children":[{"data":{"id":"cm2549zbfvk0","created":1660113492434,"text":"获取当前开始数据列位置nDataIndex = (int)m_nStartBlockIndex[i]+m_nBlockCount[i]+j","layout":null},"children":[]},{"data":{"id":"cm255tvfpe80","created":1660113614099,"text":"从buf中读取nDataIndex列开始的nDataSize个数据m_nDopXYRead：UTcdUnionFile::ReadDfsOneData()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cm259grgm400","created":1660113899017,"text":"m_pDfsBufPtr：dfs完整buf指针","layout":null},"children":[]},{"data":{"id":"cm259ysyxr40","created":1660113938291,"text":"m_nDfsFileBufDataCount：buf有多少个数据","layout":null},"children":[]},{"data":{"id":"cm25aedukig0","created":1660113972205,"text":"m_nDfsFileBufDataBlock：当前开始处数据位置","layout":null},"children":[]},{"data":{"id":"csvtyqftzc00","created":1685065775208,"text":"4dop+1通道32M波+2通道32M波 =》维度：[4+32*2+32*2]"},"children":[]}]},{"data":{"id":"cm25c8q3rm00","created":1660114116614,"text":"分离数据到m_nDopXData、m_nDopYData","layout":null},"children":[]}]},{"data":{"id":"csvtz3sc5e80","created":1685065804262,"text":"m_nDopXData、m_nDopYData：4dop+1通道32M波+2通道32M波 =》维度[260(实际2+32+32）, 256(实际为DeltaSizeLen50)]"},"children":[]}]}]}]},{"data":{"id":"cm25vu8y6xk0","created":1660115652385,"text":"读取一列数据成功","expandState":"expand","layout":null},"children":[{"data":{"id":"cm26royehtk0","created":1660118148516,"text":"CPU时钟频谱与采样频率对齐","layout":null},"children":[{"data":{"id":"cm26scr8tnk0","created":1660118200326,"text":"读取一列数据时间偏差值 = 8ms - CPU读取一列的时间-0.1","layout":null},"children":[{"data":{"id":"cm26tleuo6w0","created":1660118297532,"text":">0 说明CPU读取速度快于8ms。1.抵消累计的dMinusTime（CPU跟上采样频率）。2. 当总的CPU快于采样频率后（即抵消完dMinusTime），程序休眠。","layout":null},"children":[]},{"data":{"id":"cm26ukj2azk0","created":1660118373974,"text":"<0 说明采样频谱快，累加dMinusTime","layout":null},"children":[]}]}]},{"data":{"id":"cm24o2yxrmw0","created":1660112223347,"text":"每200ms通知系统事件恢复：evtCmd.RestoreSystemEvent()","layout":null},"children":[]}]},{"data":{"id":"cm26w82gyog0","created":1660118503578,"text":"读取一列数据失败（不足一列数据，文件结尾）","layout":null},"children":[{"data":{"id":"cm28nlh5ju00","created":1660123469706,"text":"msgCmd.NotifyReviewReadEnd()","layout":null},"children":[{"data":{"id":"cm28z8mv3yo0","created":1660124382123,"text":"CReviewControlBar::OnStop跳转到开头","layout":null},"children":[]}]},{"data":{"id":"cm28nau2ta80","created":1660123446543,"text":"挂起线程SuspendThread()","layout":null},"children":[]}]}]}]},{"data":{"id":"cm23xma4cio0","created":1660110149550,"text":"读取当前页数据：挂起状态","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cm26z35gfhs0","created":1660118727967,"text":"挂起线程，变量重置","layout":null},"children":[]}]}]}]},{"data":{"id":"cm21eftj9ls0","created":1660103004347,"text":"停止播放，状态改变","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"cs41ixuk57k0","created":1682243427602,"text":"回放导出","expandState":"expand"},"children":[{"data":{"id":"cs41j1iyipc0","created":1682243435607,"text":"AVI导出","expandState":"expand"},"children":[]},{"data":{"id":"cs41j8ecaz40","created":1682243450566,"text":"WAV导出CWavFileOutputDlg","expandState":"expand"},"children":[]}]}]},{"data":{"id":"ct7rnmy4ejk0","created":1686277982861,"text":"进度条CReviewJumpBar","expandState":"expand"},"children":[]}]},{"data":{"id":"csvtouozd1k0","created":1685065000826,"text":"走谱","expandState":"expand"},"children":[{"data":{"id":"csvtjh6qwwg0","created":1685064579605,"text":"USubscibeMsg：\nm_uMsg.nMsgId = MSG_ID_REVIEW_DATA;\nm_uMsg.lParam = (LPARAM)&m_DataItem;\nm_uMsg.wParam = PCI_PLX;","expandState":"expand"},"children":[{"data":{"id":"csvtk62pz280","created":1685064633781,"text":"DATA_MSG_ITEM：\t\nm_DataItem.m_pDataPtr1 = m_nDopXData;  // 4dop + 32M波\nm_DataItem.m_pDataPtr2 = m_nDopYData;\nm_DataItem.m_pDataPtr3 = m_nMmodeData;\nm_DataItem.m_pDataPtr4 = m_nMGateData;\nm_DataItem.m_pDataPtr5 = &m_uTcd;\nm_DataItem.m_pDataPtr6 = &m_uDfs[0];","expandState":"expand"},"children":[]}]},{"data":{"id":"csvtp397k7c0","created":1685065019464,"text":"UDataProcess::DataProcRecvDTCD8100()","expandState":"expand"},"children":[{"data":{"id":"csvtpiv4e000","created":1685065053441,"text":"获取MModeRaw数据：CW","expandState":"expand"},"children":[]},{"data":{"id":"cucp85g69800","created":1690435085311,"text":"获取数据","expandState":"expand"},"children":[{"data":{"id":"cow9wf39xps0","created":1670486097774,"text":"pDataTemp[0]\\pDataTemp[1]：dop1","expandState":"expand"},"children":[]},{"data":{"id":"cow9wmtrsb40","created":1670486114613,"text":"pDataTemp[2]\\pDataTemp[3]：dop2","expandState":"expand"},"children":[]},{"data":{"id":"cow9wsamluw0","created":1670486126517,"text":"pDataTemp[(k+j)*2 + 0]、pDataTemp[(k+j)*2 + 1]：M波原始数据","expandState":"expand"},"children":[]}]},{"data":{"id":"csvuew8v0q80","created":1685067041674,"text":"获取DOP数据","expandState":"expand"},"children":[{"data":{"id":"csvu3pdnyy00","created":1685066164721,"text":"DoFftDataLen=50","expandState":"expand"},"children":[]},{"data":{"id":"csvufifms3s0","created":1685067089972,"text":"从m_nDopXData、m_nDopYData中按通道、深度获取m_pDataXDop[2*ich+idp][50]、m_pDataYDop","expandState":"expand"},"children":[]}]},{"data":{"id":"csvuja2izfk0","created":1685067385222,"text":"获取M波数据","expandState":"expand"},"children":[{"data":{"id":"csvuhs5zmog0","created":1685067267885,"text":"M波阶数m_nMmodeSubgateNum=128","expandState":"expand"},"children":[]},{"data":{"id":"csvukuqks540","created":1685067508576,"text":"从m_nMmodeData中复制128阶到M波颜色数据m_pMmodeColor[2][TCD_CHN_MAX=256]","expandState":"expand"},"children":[]}]},{"data":{"id":"csvujex2jr40","created":1685067395776,"text":"最后一个通道时缓冲M波原始数据DoBufferMmode()","expandState":"expand"},"children":[{"data":{"id":"csvurrmhicg0","created":1685068050348,"text":"m_pBufferXAll","expandState":"expand"},"children":[]}]},{"data":{"id":"csvv7rlgl1c0","created":1685069304112,"text":"FFT: DoDopFFT()","expandState":"expand"},"children":[{"data":{"id":"csvvsvxj7q80","created":1685070959197,"text":"FFT点数nDopFftSize = 256","expandState":"expand"},"children":[]},{"data":{"id":"csvvtgwm8t40","created":1685071004854,"text":"将已有数据m_pDataFFTDop前移动nDeltaValue=50长度","expandState":"expand"},"children":[]},{"data":{"id":"csvvtwhhsgg0","created":1685071038768,"text":"向m_pDataFFTDop追加新数据m_pDataXDop","expandState":"expand"},"children":[]},{"data":{"id":"csvvwaxwna00","created":1685071226964,"text":"m_pDataFFTDop复制到m_pFFTDopValue","expandState":"expand"},"children":[]},{"data":{"id":"csvvz9sft4w0","created":1685071459549,"text":"FFT操作：mUFftDsp.FFT()","expandState":"expand"},"children":[{"data":{"id":"csvwkzm3rbk0","created":1685073161409,"text":"一次FFT包含前256/50列数据","expandState":"expand"},"children":[{"data":{"id":"csvwlcughfs0","created":1685073190213,"text":"滑动窗口？"},"children":[]}]}]},{"data":{"id":"csvw0nr7snc0","created":1685071568314,"text":"计算能量值sqrt(x^2+y^2)","expandState":"expand"},"children":[]},{"data":{"id":"csvw1ehcps00","created":1685071626491,"text":"能量值映射至颜色","expandState":"expand"},"children":[]}]},{"data":{"id":"csvw3laf5eo0","created":1685071798037,"text":"包络计算ProcDopEnv()","expandState":"expand"},"children":[]},{"data":{"id":"csvw3oyh04g0","created":1685071806022,"text":"声音处理ProcDopSoundPlay()","expandState":"expand"},"children":[]},{"data":{"id":"csvw4088bnk0","created":1685071830557,"text":"缓冲dop原始数据DoBufferDop()","expandState":"expand"},"children":[]},{"data":{"id":"csvw44lx3340","created":1685071840091,"text":"指数计算ProcDopIndex()","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"cr1qe6b9ox40","created":1678352743643,"text":"数据流：DOP原始数据","expandState":"collapse"},"children":[{"data":{"id":"cr1qfqkp15k0","created":1678352866113,"text":"回放加载","expandState":"expand"},"children":[{"data":{"id":"cr1qeb6t6j40","created":1678352754257,"text":"BOOL UDataProcess::DoBufferDop ()第一帧数据全部写入m_pBufferXDop、m_pBufferYDop","expandState":"expand"},"children":[]}]},{"data":{"id":"cr1qgd5mpb40","created":1678352915268,"text":"回放播放","expandState":"expand"},"children":[{"data":{"id":"cr1qggcc93s0","created":1678352922204,"text":"BOOL UDataProcess::DoBufferDop ()在回放加载的数据后面继续写入每一列的值到m_pBufferXDop、m_pBufferYDop","expandState":"expand"},"children":[]},{"data":{"id":"cr1qh6o9mdc0","created":1678352979522,"text":"更新m_pBufferDopIndex当前最后一列在buffer中的位置","expandState":"expand"},"children":[]}]},{"data":{"id":"cr1qi3ia0x40","created":1678353050993,"text":"快照保存","expandState":"expand"},"children":[{"data":{"id":"cr1qi62225c0","created":1678353056544,"text":"BOOL UDataProcess::GetDfsData()获取m_pBufferXDop、m_pBufferYDop中m_nSaveDopRawDataLen==37500长度的值","expandState":"expand"},"children":[]},{"data":{"id":"cr1qjukcls00","created":1678353188256,"text":"当前播放长度不足一帧时，会获取到回放加载时的数据，解决方案？？？？","expandState":"expand"},"children":[]}]}]},{"data":{"id":"csvze5xuvyw0","created":1685081089961,"text":"事件","expandState":"collapse"},"children":[{"data":{"id":"ctdz1w3avl40","created":1686908207373,"text":"点击记录将之前的快照事件存入事件列表","expandState":"expand"},"children":[{"data":{"id":"ctdz406xg2o0","created":1686908373028,"text":"CMainWnd::OnRecord()","expandState":"expand"},"children":[{"data":{"id":"ctdz3rdpf8o0","created":1686908353846,"text":"AppendSnapShortEvent()","expandState":"expand"},"children":[{"data":{"id":"ctdz4nytgb40","created":1686908424780,"text":"UEventListCmd::AddEventTail()","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"ctvtojgr8i00","created":1688721134825,"text":"添加事件UEventListCmd::AcqAddSystemEvent()","expandState":"expand"},"children":[{"data":{"id":"ctvtp46rtmw0","created":1688721179933,"text":"获取主界面dop窗参数","expandState":"expand"},"children":[]},{"data":{"id":"ctvtpyy41280","created":1688721246890,"text":"判断不同事件类型，获取事件名称","expandState":"expand"},"children":[]},{"data":{"id":"ctvtr6j6q7s0","created":1688721341766,"text":"UEventListCmd::AcqAddNewEvent()补充事件信息","expandState":"expand"},"children":[]},{"data":{"id":"ctdz4tzz1aw0","created":1686908437910,"text":"添加事件列表UEventListCmd::AddEventTail()","expandState":"expand"},"children":[]}]},{"data":{"id":"csvze9h9on40","created":1685081097665,"text":"事件列表绘制CProtocolListCtrl::DrawItem()","expandState":"expand"},"children":[]},{"data":{"id":"ct13e4wctb40","created":1685600171917,"text":"保存事件列表到TCDTemp.evt文件CMainWnd::OnSaveEvt()","expandState":"expand"},"children":[]},{"data":{"id":"ct13f5b6k6g0","created":1685600251177,"text":"读取事件列表文件UEventListCmd::ReadEventListFromTempFile()","expandState":"expand"},"children":[]}]},{"data":{"id":"cmwvyubq9bc0","created":1663236035203,"text":"fastreport","layout":null,"expandState":"collapse"},"children":[{"data":{"id":"cookvqvqdcw0","created":1669704597631,"text":"主界面报告点击CMainWnd::OnToolCmd() 响应IDS_TOOLBAR_REPORT","expandState":"expand"},"children":[{"data":{"id":"cookw4tcmqo0","created":1669704627962,"text":"CMainWnd::OnFastPrint()","expandState":"expand"},"children":[{"data":{"id":"cookwc7l97c0","created":1669704644060,"text":"void CArchiveManageDlg::SetComment()","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cmwvyy97itc0","created":1663236043758,"text":"CArchiveManageDlg::OnEditReportComment()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmww35f8roo0","created":1663236372817,"text":"CArchiveManageDlg::ShowReportRreview()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmww3e052vk0","created":1663236391494,"text":"CArchiveManageDlg::OnBtnPrintPreview( )","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cooklx0bpvk0","created":1669703827327,"text":"CArchiveManageDlg::UpdateReportEditData()执行DelicaReport.exe","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"cmww3mpps4g0","created":1663236410455,"text":"CArchiveManageDlg::UpdateReportEditData()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxh7pq42ow0","created":1663295973774,"text":"OpenReportExcute()","expandState":"expand","layout":null},"children":[{"data":{"id":"cmww7yoanwg0","created":1663236749947,"text":"创建报告临时文件夹CreateTempReportDir()","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"cmxf7trlmh40","created":1663290340352,"text":"SaveReportBMP()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxf81xemg00","created":1663290358117,"text":"报告组成结构体GetSnapshotReportInfo()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxfn1677sw0","created":1663291531934,"text":"遍历所有快照结构体，构造SnapshotReportInfoArray（是否勾选显示上下包络、数据、图片，及指数数据.....等报告元素）","layout":null},"children":[]}]},{"data":{"id":"cmxfvempsww0","created":1663292188144,"text":"报告中快照收集SaveEspecialBMP() ","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cy1g1r2yju00","created":1703916668100,"text":"快照反色"},"children":[]},{"data":{"id":"cy1g1sp9gig0","created":1703916671626,"text":"其它快照处理"},"children":[]}]},{"data":{"id":"cmxg3uld2dc0","created":1663292849804,"text":"保存各节点信息，生成report_ds.xml文件：SaveReportDsFile()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxg4ry69w80","created":1663292922413,"text":"构造CReport_DS","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxgjd6yz6o0","created":1663294065756,"text":"SaveConfigInfo()","layout":null},"children":[{"data":{"id":"cmxgjsavtvs0","created":1663294098644,"text":"UReportData","expandState":"expand","layout":null},"children":[{"data":{"id":"cmxgjtiuqds0","created":1663294101302,"text":"uPrintData","layout":null},"children":[]}]},{"data":{"id":"cmxgkocysts0","created":1663294168427,"text":"iLanguageType","layout":null},"children":[]},{"data":{"id":"cmxgls7tv340","created":1663294255187,"text":"FastReportPathAndName","layout":null},"children":[]},{"data":{"id":"cmxgoijdzdk0","created":1663294469211,"text":"清空临时检查文件夹中的报告","layout":null},"children":[]}]},{"data":{"id":"cmxgjhpq6m80","created":1663294075597,"text":"保存报告标题（医院名称）SaveTitleInfo()","expandState":"expand","layout":null},"children":[{"data":{"id":"cmxgjosqdbc0","created":1663294091016,"text":"UUserData","layout":null},"children":[{"data":{"id":"cmxgqnd961c0","created":1663294636452,"text":"m_sHospitalName","layout":null},"children":[]}]}]},{"data":{"id":"cmxgqtyji400","created":1663294650800,"text":"保存患者信息SavePatInfoToDsFile()","layout":null},"children":[]},{"data":{"id":"cmxgwlckns00","created":1663295102243,"text":"指数表格提示、LI指数SaveInstructToDsFile()","layout":null},"children":[]},{"data":{"id":"cmxgy3ure140","created":1663295220889,"text":"LOGO、Willis环图片地址SavePicList()","layout":null},"children":[]},{"data":{"id":"cmxgzg5f19c0","created":1663295326019,"text":"表格血管顺序SaveIndexList()","layout":null},"children":[]},{"data":{"id":"cmxh22815js0","created":1663295530794,"text":"Willis环血管顺序SaveNewWillisIndexList()","layout":null},"children":[]},{"data":{"id":"cmxh3xcxbqw0","created":1663295676934,"text":"SaveNewWillisImageList()","layout":null},"children":[]},{"data":{"id":"cmxh3z5q7bk0","created":1663295680853,"text":"SaveSnapshotToDsFile()","layout":null},"children":[]},{"data":{"id":"cmxh4re9k4g0","created":1663295742319,"text":"两列快照SaveTwoColumnsSnapshotToDsFile()","layout":null},"children":[]},{"data":{"id":"cmxh5u35c0w0","created":1663295826541,"text":"保存为xml","layout":null},"children":[{"data":{"id":"cmxh5uazjq80","created":1663295827015,"text":"dtcd8100\\SRC2009\\UIFrame\\Bin\\Report\\\\report_ds.xml","layout":null},"children":[]}]}]}]}]},{"data":{"id":"cmww7cqemdk0","created":1663236702186,"text":"生成willis环GeneratorWillisReportImage()","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"cmxh7zknjuw0","created":1663295995212,"text":"SetDefaultReport()","layout":null,"expandState":"expand"},"children":[{"data":{"id":"cmxh8e3dff40","created":1663296026819,"text":"获取场景文件中默认的报告模板写入dtcd8100\\SRC2009\\UIFrame\\Bin\\Report\\ReportParam.xml","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"coomc1qwj1k0","created":1669708696220,"text":"更新数据库中结论LRESULT CMainFrame::OnWriteDiagnosetoDB()","expandState":"expand"},"children":[{"data":{"id":"coomc8349400","created":1669708710019,"text":"从report_ds.xml中获取fastreport结论信息，写入数据库BOOL CArchiveManageDlg::WriteCommetToDB()","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cpnfs8159uo0","created":1673244814440,"text":"授权","expandState":"collapse"},"children":[{"data":{"id":"cpnfsls46r40","created":1673244844369,"text":"BOOL CSoftwareKey::VerifyDeviceCode()","expandState":"expand"},"children":[{"data":{"id":"cpnftl9yg080","created":1673244921636,"text":"读取PublicKey.dat =》KeyStr：RSA密钥(out)","expandState":"expand"},"children":[]},{"data":{"id":"cpnftmrprmo0","created":1673244924886,"text":"读取Model.dat=》ModStr：模n(n)","expandState":"expand"},"children":[]},{"data":{"id":"cpnftrci39s0","created":1673244934850,"text":"删除LicenseResult.txt","expandState":"expand"},"children":[]},{"data":{"id":"cpnfukbozmg0","created":1673244997928,"text":"解密bool CMcs::Decrypt()","expandState":"expand"},"children":[{"data":{"id":"cpnfvfpaizk0","created":1673245066230,"text":"从授权文件Lisence.dat读取信息头McsHead","expandState":"expand"},"children":[]},{"data":{"id":"cpnjtuazyxk0","created":1673256225729,"text":"版本控制 ","expandState":"expand"},"children":[]},{"data":{"id":"cpnjwe2olqo0","created":1673256425490,"text":"int  CRsa::Decrypt()解密DES密钥串（int  CRsa::Encrypt()）","expandState":"expand"},"children":[{"data":{"id":"cpnjx6novkw0","created":1673256487711,"text":"bool CRsa::SetKey()设置RSA密钥和模n (KeyStr\\ModStr)","expandState":"expand"},"children":[{"data":{"id":"cpnk5a6g9eg0","created":1673257122289,"text":"bool CBigInt::BuildBIFromStr()由输入字符串构造一个大数"},"children":[]}]},{"data":{"id":"cpnkch8f51k0","created":1673257686194,"text":"bool CBigInt::BuildBIFromByte()由输入字节组n构造一个大数a","expandState":"expand"},"children":[]},{"data":{"id":"cpnkjmrms800","created":1673258246789,"text":"bool CBigInt::PowMod()大数乘方取模 ( C = Power(A,B) (Mod N) )","expandState":"expand"},"children":[]}]},{"data":{"id":"cpnjxihhfs00","created":1673256513457,"text":"检查RSA密钥的正确性 !=0   <=16","expandState":"expand"},"children":[]},{"data":{"id":"cpnjypnkjs00","created":1673256607426,"text":"DES解密bool CDes::Decrypt()","expandState":"expand"},"children":[{"data":{"id":"cpnjyxqb9gw0","created":1673256625006,"text":"分支主题","expandState":"expand"},"children":[]}]},{"data":{"id":"cpnfup4v5io0","created":1673245008399,"text":"输出到LicenseResult.txt","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cqz3bg7ckj40","created":1678084524640,"text":"授权页CCustomerLicenseDlg","expandState":"expand"},"children":[]},{"data":{"id":"cqz3bkfrdns0","created":1678084533856,"text":"初始化授权读取BOOL CDTCDApp::CheckParam()","expandState":"expand"},"children":[{"data":{"id":"csgslrmu2ag0","created":1683538538614,"text":"授权读取","expandState":"expand"},"children":[]},{"data":{"id":"csgslxpzuo00","created":1683538551866,"text":"医院信息读取","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cpq0vp3wkyg0","created":1673507449926,"text":"血镰病","expandState":"collapse"},"children":[{"data":{"id":"cpq1aijbpvk0","created":1673508611084,"text":"配置文件读取","expandState":"expand"},"children":[{"data":{"id":"cpq17wi9pwg0","created":1673508406402,"text":"从配置文件xml中读取血镰病配置BOOL\tUDopSetup::ReadDopSickleCellData()到全局变量UDopSickleCellData","expandState":"expand"},"children":[]},{"data":{"id":"cpq1an8yrhs0","created":1673508621341,"text":"读取场景应用配置BOOL USystemData::ReadMiscData()中血镰病是否使用","expandState":"expand"},"children":[{"data":{"id":"cpq1bnqeia00","created":1673508700760,"text":"写回全局变量UDopSickleCellData","expandState":"expand"},"children":[]},{"data":{"id":"cpq1bqic1280","created":1673508706802,"text":"写入场景应用列表m_uScenesApplyList","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cpq0vtqfgo00","created":1673507459996,"text":"场景应用设置ScenesApplySetup","expandState":"expand"},"children":[{"data":{"id":"cpq0zhn8vf40","created":1673507747138,"text":"初始化：从场景列表m_ScenesApplylist中获取设置项是否勾选","expandState":"expand"},"children":[]},{"data":{"id":"cpq11nsdtnk0","created":1673507917238,"text":"OK：将当前设置写回全局变量UDopSickleCellData","expandState":"expand"},"children":[]}]},{"data":{"id":"cpq13ro02z40","created":1673508082409,"text":"血镰病参数设置","expandState":"expand"},"children":[{"data":{"id":"cxzuwpkopwg0","created":1703755469733,"text":"界面DopSickleCellSetupPage"},"children":[]},{"data":{"id":"cxzuwr3vaqo0","created":1703755473070,"text":"设置保存：CMainWnd::OnSetupDop2()"},"children":[{"data":{"id":"cxzuxaubpt40","created":1703755516028,"text":"重绘dop窗，应用血镰病配置：CFftView::UpdataDopSickelCellData()"},"children":[{"data":{"id":"cy0hes5bwm80","created":1703818950308,"text":"void CFftWnd::RedrawWholeGraph()"},"children":[]}]}]}]},{"data":{"id":"cpq1teebwa00","created":1673510090994,"text":"void CFftWnd::DrawSickelCell()计算更新DopSickleCellParam","expandState":"expand"},"children":[]},{"data":{"id":"cpq1p0na17k0","created":1673509747603,"text":"采集void CMainWnd::OnAcquire()","expandState":"expand"},"children":[{"data":{"id":"cpq1p9csc1s0","created":1673509766560,"text":"从场景文件中加载UDopSickleCellData","expandState":"expand"},"children":[]}]},{"data":{"id":"cpq1l2uczjk0","created":1673509438928,"text":"记录void CMainWnd::OnRecord()","expandState":"expand"},"children":[{"data":{"id":"cpq1lcv0gbc0","created":1673509460736,"text":"血镰病配置UDopSickleCellData存储到场景文件uScene.m_DopSickleCellData","expandState":"expand"},"children":[]}]},{"data":{"id":"cpq1i8h6s6w0","created":1673509216100,"text":"保存快照CString CMainWnd::SaveDopSnap()","expandState":"expand"},"children":[{"data":{"id":"cpq1iakwtug0","created":1673509220679,"text":"血镰病配置UDopSickleCellData存储到场景文件uScene.m_DopSickleCellData ","expandState":"expand"},"children":[]},{"data":{"id":"cpq1jx1c1400","created":1673509347925,"text":"血镰病DopSickleCellParam写入快照文件","expandState":"expand"},"children":[]}]},{"data":{"id":"cpq14s08j7s0","created":1673508161512,"text":"打开快照编辑界面","expandState":"expand"},"children":[{"data":{"id":"cpq14xwg6s00","created":1673508174344,"text":"加载DOP\\M波等数据UTcdSnapFile","expandState":"expand"},"children":[{"data":{"id":"cpq158j5g6g0","created":1673508197485,"text":"修改数据读取大小","expandState":"expand"},"children":[]}]},{"data":{"id":"cpq1s6lttlc0","created":1673509995669,"text":"从快照DopSickleCellParam中还原血镰病配置DopSickleCellData","expandState":"expand"},"children":[]},{"data":{"id":"cy0lo9fmhso0","created":1703830977653,"text":"重绘快照dop窗void CFftWnd::OnPaint()"},"children":[{"data":{"id":"cy0lpsjsrgw0","created":1703831097628,"text":"void CFftWnd::BuildDibDataFromRgbArray()","expandState":"expand"},"children":[{"data":{"id":"cy0lowg4d3s0","created":1703831027749,"text":"更新血镰病绘制"},"children":[]}]}]}]},{"data":{"id":"cpq0x6vet1s0","created":1673507566959,"text":"回放","expandState":"expand"},"children":[{"data":{"id":"cpq1m6rg36g0","created":1673509525823,"text":"加载BOOL CMainWnd::LoadExam()","expandState":"expand"},"children":[{"data":{"id":"cpq1ms4w4js0","created":1673509572349,"text":"从场景文件中加载UDopSickleCellData","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cpq16q0t7480","created":1673508313922,"text":"快照反色重绘UDataProcessCmd::DrawDopPrintSpectrumEconomic()","expandState":"expand"},"children":[]},{"data":{"id":"cpq1gftlwag0","created":1673509075360,"text":"声音回放","expandState":"expand"},"children":[{"data":{"id":"cpq1gozyesg0","created":1673509095335,"text":"void CFftWnd::DrawSpectrum()中每个像素画血镰病线","expandState":"expand"},"children":[]}]},{"data":{"id":"cpq1o3sn0wg0","created":1673509676094,"text":"场景切换void CMainWnd::OnExamSceneChange()","expandState":"expand"},"children":[{"data":{"id":"cpq1o8h14mw0","created":1673509686276,"text":"场景中还原UDopSickleCellData","expandState":"expand"},"children":[]}]}]},{"data":{"id":"cs2bsuvtcww0","created":1682069295975,"text":"数据库设置CUserDatabaseSetupPage","expandState":"collapse"},"children":[{"data":{"id":"cs2bsz6iae80","created":1682069305328,"text":"一键修复数据库OnBnClickedButtonRepairdb()","expandState":"expand"},"children":[{"data":{"id":"cs2btbwnd4o0","created":1682069333030,"text":"关闭当前数据库连接","expandState":"expand"},"children":[]},{"data":{"id":"cs2bu51sy3k0","created":1682069396469,"text":"压缩当前输入框数据库文件UserDB.mdb到临时tempDB.mdb","expandState":"expand"},"children":[{"data":{"id":"cs2bweun2lc0","created":1682069574532,"text":"若输入框数据库文件UserDB.mdb不存在，则新建","expandState":"expand"},"children":[]}]},{"data":{"id":"cs2busnohbk0","created":1682069447857,"text":"将错误的数据库文件UserDB.mdb改名UserDB_ERR.mdb","expandState":"expand"},"children":[]},{"data":{"id":"cs2bv8qjg280","created":1682069482859,"text":"tempDB.mdb改名为UserDB.mdb","expandState":"expand"},"children":[]}]}]},{"data":{"id":"crb1ystd75k0","created":1679299431729,"text":"DOP血流方向改变","expandState":"collapse"},"children":[{"data":{"id":"crb1yyn53hc0","created":1679299444413,"text":"主界面CFftView::OnDopDirClick()","expandState":"expand"},"children":[{"data":{"id":"crb1zlzxitk0","created":1679299495252,"text":"设置血管参数（方向）SetBloodParam","expandState":"expand"},"children":[]},{"data":{"id":"crb24oxamhs0","created":1679299893444,"text":"反转测量点CFftWnd::UpdateCalcPoint()","expandState":"expand"},"children":[]},{"data":{"id":"crb25bagzxk0","created":1679299942130,"text":"重新获取DFS数据，重新进行FFT数据处理","expandState":"expand"},"children":[{"data":{"id":"crb25l3v7xs0","created":1679299963499,"text":"UDataProcess::GetDfsData()","expandState":"expand"},"children":[{"data":{"id":"crb2hgp2ui80","created":1679300894267,"text":"总列数：一屏数据宽度nwidth =  6s采样时间 * 6250采样频率","expandState":"expand"},"children":[]},{"data":{"id":"crb2j2zwbfk0","created":1679301021175,"text":"行数：FFT点数nDopFftSize = 256","expandState":"expand"},"children":[]},{"data":{"id":"crb2jtwljvk0","created":1679301079748,"text":"fDeltalen = 6250 / 125 ","expandState":"expand"},"children":[{"data":{"id":"crb2kov193k0","created":1679301147134,"text":"6250：采样频率"},"children":[]},{"data":{"id":"crb2kw5pols0","created":1679301163017,"text":"125：FFT频率MAX_DO_FFT_FREQ"},"children":[]},{"data":{"id":"crb2l8fd2hc0","created":1679301189722,"text":"fDeltalen 每个FFT所需采样点？？？"},"children":[]}]},{"data":{"id":"crb2xp1ixmg0","created":1679302166261,"text":"设置每一列数据（FFT后的）至FFTWnd：CFftWnd::SetDopFftData(","expandState":"expand"},"children":[]},{"data":{"id":"crb32ghr1tk0","created":1679302539472,"text":"血流方向翻转CFftWnd::ReGenerateAllRgbFromDopData()","expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"crb1z0hg2uw0","created":1679299448422,"text":"快照界面CSnapshotLoadDlg::OnDopDirClick()","expandState":"expand"},"children":[]}]},{"data":{"id":"cx4dd6r796o0","created":1700557622324,"text":"声谱图","expandState":"collapse"},"children":[{"data":{"id":"cx4ddkzlp0g0","created":1700557653307,"text":"回放"},"children":[{"data":{"id":"cx4ddnnp6uw0","created":1700557659117,"text":"选框改变CFftView::OnDopHITSRectChange()"},"children":[{"data":{"id":"cx4ddvfqfdk0","created":1700557676050,"text":"绘制CSoundStorePort::RedrawWholeGraph()"},"children":[]},{"data":{"id":"cx4ded3ixao0","created":1700557714494,"text":"分支主题"},"children":[]}]}]}]},{"data":{"id":"cyf44q6ooyg0","created":1705304887316,"text":"F1-F4小键盘"},"children":[{"data":{"id":"cyf44una5740","created":1705304897026,"text":"BOOL CMainWnd::OnKeyFuncMap()"},"children":[{"data":{"id":"cyf45cpnn1c0","created":1705304936352,"text":"BOOL CMainWnd::OnUsrKeyMapMessage()"},"children":[{"data":{"id":"cyf45xpv86o0","created":1705304982077,"text":"保存多深度快照BOOL CMainWnd::SaveMultiSnap()"},"children":[]}]}]}]},{"data":{"id":"cyf78ai5t340","created":1705313629968,"text":"多深度CMultiGatingView"},"children":[]},{"data":{"id":"civb9k9no8g0","created":1648451438291,"text":"DICOM","expandState":"collapse"},"children":[{"data":{"id":"civbekdkl1k0","created":1648451830348,"text":"Worklist","expandState":"expand"},"children":[{"data":{"id":"civbemcq8u80","created":1648451834651,"text":"通过本机、服务器、设备类型等配置信息连接\nDDcmWorklist::GetWorklistInfo( const DCM_CONNECT_STRUCT &stuDcmConnect, char* pModality )"},"children":[{"data":{"id":"civbfg6tuns0","created":1648451899597,"text":"mDCM_CONNECT_STRUCT.m_sCalledAE 服务器名\nmDCM_CONNECT_STRUCT.m_sCalledIP 服务器IP\nmDCM_CONNECT_STRUCT.m_sCalledPort 服务器端口\nmDCM_CONNECT_STRUCT.m_sCallingAE 本机名\nmDCM_CONNECT_STRUCT.m_sModality 设备类型"},"children":[]}]},{"data":{"id":"civbim573zk0","created":1648452147652,"text":"构建患者列表","expandState":"expand"},"children":[{"data":{"id":"civbhtksde00","created":1648452085468,"text":"m_worklist.GetPatientInfo(iIndex) 获取第几个患者信息UImageContext"},"children":[{"data":{"id":"civbl8gacp40","created":1648452352940,"text":"uImageItem.strPatientName 患者姓名\n uImageItem.strPatientSex 患者性别\n uImageItem.strPatientBirthDate 患者出生日期（19750305）\n uImageItem.strPatientAge 患者年龄\n uImageItem.strPatientID tcdid病历号\n uImageItem.strAccessNumber worklistinfo.strWorklistNum检查号\n uImageItem.strModality 设备类型 \n worklistinfo.strStartTime 开始日期（检查日期）\n worklistinfo.strStudyDescription 研究描述"},"children":[]}]},{"data":{"id":"civbj4xo6y80","created":1648452188556,"text":"记录与输入tcdid匹配的患者序号"},"children":[]}]},{"data":{"id":"civbkhzk4lc0","created":1648452295332,"text":"存在与输入tcdid匹配的患者"},"children":[{"data":{"id":"civbknnkco00","created":1648452307668,"text":"将患者信息放入全局变量中"},"children":[{"data":{"id":"civbq191hbk0","created":1648452729085,"text":"m_strPatientName"},"children":[]},{"data":{"id":"civbq3ft1280","created":1648452733848,"text":"m_strPatientGender"},"children":[]},{"data":{"id":"civbq9d373c0","created":1648452746744,"text":"m_timeBirthDate"},"children":[]},{"data":{"id":"civbqdup3so0","created":1648452756516,"text":"m_strAge"},"children":[]},{"data":{"id":"civbqikp08w0","created":1648452766795,"text":"m_sTCDID"},"children":[]}]}]},{"data":{"id":"civbpfsksts0","created":1648452682377,"text":"没有符合tcdid条件的患者"},"children":[{"data":{"id":"civbpnqpbqw0","created":1648452699678,"text":"获得所有患者列表"},"children":[]},{"data":{"id":"civbzm7fb3s0","created":1648453479977,"text":"添加所有设备类型"},"children":[]},{"data":{"id":"civc9wzl9eo0","created":1648454287090,"text":"筛选日期、设备类型等条件"},"children":[]}]}]}]}]},"template":"right","theme":"fresh-blue","version":"1.4.43"}